<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Sleep Tracker</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="api.js" type="module"></script>
  <script src="dashboard.js" type="module"></script>
  <script src="login.js" type="module"></script>
  <script src="script.js" type="module"></script>
  <script src="prediction.js" type="module"></script>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="login_style.css" />
</head>
<body>
  <div id="profile-box" class="profile-box">
    👤 User: <span id="logged-user">None</span>
  </div>
  <div class="container">
    <nav>
      <button data-target="overview">📄 Overview</button>
      <button data-target="dashboard">📊 Dashboard</button>
      <button data-target="data">📚 Data</button>
      <button data-target="api">🔌 API</button>
      <button data-target="predict">🔮 Prediction</button>
      <button data-target="team">👥 Team</button>
      <button data-target="login">📝 Login</button>
    </nav>

    <main>
      <header>
        <h1>Smart Sleep Tracker</h1>
        <p>Visualize your sleep. Optimize your rest.</p>
      </header>

      <section id="overview" class="content-section active">
        <h2><strong>Project Overview</strong></h2>
        <div class="overview-banner">
          <img src="images/slee_banner1.jpg" alt="Sleep Analysis Banner" class="overview-img-banner" />
        </div>
        <p>
          Sleep quality is influenced by multiple factors. Our Smart Sleep Tracker combines real-time data and historical lifestyle patterns to uncover what really affects your sleep by estimating your next sleep cycle based on your current heartrate, room temperature and humidity.
        </p>
        <div class="overview-features">
          <div class="feature-box">
            <img src="images/thermometer.png" alt="Temp & Humidity" />
            <h4>Environment Monitoring</h4>
            <p>Track temperature and humidity using KY-015 sensors in real-time or using the City's Temperature.</p>
          </div>
          <div class="feature-box">
            <img src="images/medical.png" alt="Heart Rate" />
            <h4>Heart Rate Detection</h4>
            <p>Monitor heartbeat with KY-039 or any heartbeat Detection tool Example (Apple Watch) and identify sleep disturbances.</p>
          </div>
          <div class="feature-box">
            <img src="images/data.png" alt="Analysis" />
            <h4>Data Integration</h4>
            <p>Merge local sensor readings with Kaggle datasets for deeper insights.</p>
          </div>
          <div class="feature-box">
            <img src="images/bot.png" alt="AI Prediction" />
            <h4>AI-Based Prediction</h4>
            <p>Estimate upcoming sleep quality based on environmental inputs.</p>
          </div>
        </div>
      </section>

      <section id="dashboard" class="content-section">
        <h2>📊 Sleep Dashboard</h2>
        <iframe src="sleepdurationchart.html" width="100%" height="600" style="border: none;"></iframe>
      </section>

      <section id="data" class="content-section">
        <h2>📚 Data Sources</h2>
        <h3>Primary</h3>
        <ul>
          <li>KY-015: Temperature & Humidity Sensor</li>
          <li>KY-039: Heartbeat Sensor</li>
          <li>Google Forms</li>
        </ul>
        <h3>Secondary</h3>
        <ul>
          <li>
            <a href="https://www.kaggle.com/datasets/equilibriumm/sleep-efficiency" target="_blank">
              1. Kaggle Sleep Efficiency Dataset
            </a>
          </li>
          <li><img src="images/sleep_efficiency.jpg" class="sleep_data sleep_data1" alt="Sleep Efficiency Chart" /></li>
          <li>
            <a href="https://www.kaggle.com/datasets/karthikiye/wearable-tech-sleep-quality/data" target="_blank">
              2. Kaggle Sleep Environment Dataset
            </a>
          </li>
          <li><img src="images/sleep_quality.jpg" class="sleep_data sleep_data2" alt="Sleep Quality Chart" /></li>
          <li>
            <a href="https://www.kaggle.com/datasets/uom190346a/sleep-health-and-lifestyle-dataset" target="_blank">
              3. Sleep Health and Lifestyle Dataset
            </a>
          </li>
          <li><img src="images/sleep_lifestyle.jpg" class="sleep_data sleep_data3" alt="Sleep Lifestyle Chart" /></li>
        </ul>
      </section>

      <section id="api" class="content-section">
        <h2>API Overview</h2>
        <img src="images/api_example.jpg" alt="API Overview Diagram" style="width:100%;max-width:700px;margin-bottom:1rem;" />
        <ul>
          <li><strong>/efficiency/{user_id}:</strong> Predicted sleep efficiency and breakdown for latest session</li>
          <li><strong>/log/{user_id}:</strong> All logged environmental + heartrate data</li>
          <li><strong>/latest/{user_id}:</strong> Latest reading from sensors</li>
          <li><strong>/user/login:</strong> Authenticates a user</li>
          <li><strong>/user/register:</strong> Registers a new user with age, gender, exercise, and smoke info</li>
          <li><strong>/user/edit:</strong> Updates user profile info</li>
        </ul>
      </section>

      <section id="predict" class="content-section">
        <h2>Prediction Page</h2>

        <div style="margin-bottom: 1rem;">
          <label for="trend-type">Your Sleep Trend: </label>
          <select id="trend-type">
            <option value="efficiency">Efficiency</option>
            <option value="duration">Duration</option>
          </select>
        </div>

        <div id="trend-chart" style="height: 400px; margin-bottom: 2rem;"></div>

        <h3>History</h3>
        <table id="efficiency-history" border="1" style="width:100%;margin-bottom:2rem;">
          <thead>
            <tr><th>Date</th><th>Efficiency</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section id="team" class="content-section">
        <h2>👥 Team & Deliverables</h2>
        <div class="team-grid">
          <div class="team-member">
            <img src="images/members/rick.jpg" alt="Riccardo Mario Bonato" class="team-photo" />
            <h4>Riccardo Mario Bonato</h4>
            <p>Member 1<br />Front End</p>
          </div>
          <div class="team-member">
            <img src="images/members/rat.jpg" alt="Rattanan Rung-Uthai" class="team-photo" />
            <h4>Rattanan Rung-Uthai</h4>
            <p>Member 2<br />Back End & API Design</p>
          </div>
        </div>
        <p style="margin-top: 2rem;">
          This project was developed by a Year-2 student team from course 01219335 (Data Acquisition and Integration). Final deliverables include real-time data integration, predictive analytics, and a full-featured web dashboard.
        </p>
      </section>

      <section id="login" class="content-section">
        <h2>📝 Login</h2>
        <form id="login-form">
          <label for="login-username">Username:</label><br />
          <input type="text" id="login-username" required /><br />
          <label for="login-password">Password:</label><br />
          <input type="password" id="login-password" required /><br />
          <label for="login-smoke">Do you Smoke?</label><br />
          <select id="login-smoke">
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select><br />
          <label for="login-exercise">Exercise sessions/week:</label><br />
          <input type="number" id="login-exercise" min="0" max="7" /><br />

          <button type="submit" class="register-btn">Login</button>
          <button type="button" class="register-btn">Register</button>
          <p id="login-message" style="margin-top: 1rem;"></p>
        </form>
      </section>

      <footer>
        <p>&copy; 2025 Smart Sleep Tracker Project</p>
      </footer>
    </main>
  </div>
</body>
</html>